(self.webpackChunkdqlx_docs=self.webpackChunkdqlx_docs||[]).push([[443],{3905:function(e,n,r){"use strict";r.d(n,{Zo:function(){return c},kt:function(){return m}});var t=r(7294);function a(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function l(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function i(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?l(Object(r),!0).forEach((function(n){a(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function o(e,n){if(null==e)return{};var r,t,a=function(e,n){if(null==e)return{};var r,t,a={},l=Object.keys(e);for(t=0;t<l.length;t++)r=l[t],n.indexOf(r)>=0||(a[r]=e[r]);return a}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(t=0;t<l.length;t++)r=l[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var s=t.createContext({}),u=function(e){var n=t.useContext(s),r=n;return e&&(r="function"==typeof e?e(n):i(i({},n),e)),r},c=function(e){var n=u(e.components);return t.createElement(s.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},p=t.forwardRef((function(e,n){var r=e.components,a=e.mdxType,l=e.originalType,s=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),p=u(r),m=a,f=p["".concat(s,".").concat(m)]||p[m]||d[m]||l;return r?t.createElement(f,i(i({ref:n},c),{},{components:r})):t.createElement(f,i({ref:n},c))}));function m(e,n){var r=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var l=r.length,i=new Array(l);i[0]=p;var o={};for(var s in n)hasOwnProperty.call(n,s)&&(o[s]=n[s]);o.originalType=e,o.mdxType="string"==typeof e?e:a,i[1]=o;for(var u=2;u<l;u++)i[u]=r[u];return t.createElement.apply(null,i)}return t.createElement.apply(null,r)}p.displayName="MDXCreateElement"},8215:function(e,n,r){"use strict";var t=r(7294);n.Z=function(e){var n=e.children,r=e.hidden,a=e.className;return t.createElement("div",{role:"tabpanel",hidden:r,className:a},n)}},1395:function(e,n,r){"use strict";r.d(n,{Z:function(){return c}});var t=r(7294),a=r(944),l=r(6010),i="tabItem_1uMI",o="tabItemActive_2DSg";var s=37,u=39;var c=function(e){var n=e.lazy,r=e.block,c=e.defaultValue,d=e.values,p=e.groupId,m=e.className,f=(0,a.Z)(),v=f.tabGroupChoices,b=f.setTabGroupChoices,g=(0,t.useState)(c),h=g[0],y=g[1],q=t.Children.toArray(e.children),k=[];if(null!=p){var x=v[p];null!=x&&x!==h&&d.some((function(e){return e.value===x}))&&y(x)}var N=function(e){var n=e.currentTarget,r=k.indexOf(n),t=d[r].value;y(t),null!=p&&(b(p,t),setTimeout((function(){var e,r,t,a,l,i,s,u;(e=n.getBoundingClientRect(),r=e.top,t=e.left,a=e.bottom,l=e.right,i=window,s=i.innerHeight,u=i.innerWidth,r>=0&&l<=u&&a<=s&&t>=0)||(n.scrollIntoView({block:"center",behavior:"smooth"}),n.classList.add(o),setTimeout((function(){return n.classList.remove(o)}),2e3))}),150))},w=function(e){var n,r;switch(e.keyCode){case u:var t=k.indexOf(e.target)+1;r=k[t]||k[0];break;case s:var a=k.indexOf(e.target)-1;r=k[a]||k[k.length-1]}null==(n=r)||n.focus()};return t.createElement("div",{className:"tabs-container"},t.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.Z)("tabs",{"tabs--block":r},m)},d.map((function(e){var n=e.value,r=e.label;return t.createElement("li",{role:"tab",tabIndex:h===n?0:-1,"aria-selected":h===n,className:(0,l.Z)("tabs__item",i,{"tabs__item--active":h===n}),key:n,ref:function(e){return k.push(e)},onKeyDown:w,onFocus:N,onClick:N},r)}))),n?(0,t.cloneElement)(q.filter((function(e){return e.props.value===h}))[0],{className:"margin-vert--md"}):t.createElement("div",{className:"margin-vert--md"},q.map((function(e,n){return(0,t.cloneElement)(e,{key:n,hidden:e.props.value!==h})}))))}},9443:function(e,n,r){"use strict";var t=(0,r(7294).createContext)(void 0);n.Z=t},944:function(e,n,r){"use strict";var t=r(7294),a=r(9443);n.Z=function(){var e=(0,t.useContext)(a.Z);if(null==e)throw new Error("`useUserPreferencesContext` is used outside of `Layout` Component.");return e}},2571:function(e,n,r){"use strict";r.r(n),r.d(n,{frontMatter:function(){return s},metadata:function(){return u},toc:function(){return c},default:function(){return p}});var t=r(2122),a=r(9756),l=(r(7294),r(3905)),i=r(1395),o=r(8215),s={sidebar_position:5},u={unversionedId:"queries/variables",id:"queries/variables",isDocsHomePage:!1,title:"Query Variables",description:"In this section we'll learn how to create and use Query Variables",source:"@site/docs/queries/variables.mdx",sourceDirName:"queries",slug:"/queries/variables",permalink:"/dqlx/docs/queries/variables",editUrl:"https://github.com/fenos/dqlx-docs/edit/master/docs/queries/variables.mdx",version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"Pagination",permalink:"/dqlx/docs/queries/pagination"},next:{title:"Execution",permalink:"/dqlx/docs/queries/execution"}},c=[{value:"Defining Query Variable",id:"defining-query-variable",children:[]},{value:"Use the variable",id:"use-the-variable",children:[]},{value:"Value Variables",id:"value-variables",children:[]}],d={toc:c};function p(e){var n=e.components,r=(0,a.Z)(e,["components"]);return(0,l.kt)("wrapper",(0,t.Z)({},d,r,{components:n,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"In this section we'll learn how to create and use ",(0,l.kt)("a",{parentName:"p",href:"https://dgraph.io/docs/query-language/query-variables/"},"Query Variables")),(0,l.kt)("h3",{id:"defining-query-variable"},"Defining Query Variable"),(0,l.kt)("p",null,"This time let's start explaining variables in ",(0,l.kt)("strong",{parentName:"p"},"dqlx")," starting from a plain DQL statement."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-graphql"},"var(func: eq(name, $0)) {\n    film {\n        performance {\n            D AS genre\n        }\n    }\n}\n")),(0,l.kt)("p",null,"then you will write the variable this way"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'variable := dqlx.Variable(dql.EqFn("name", "test")).\n    Edge("film").\n    Edge("film->performance", dqlx.Select(`\n         D AS genre\n    `))\n')),(0,l.kt)("p",null,"If you want to add a variable on an edge you'll use ",(0,l.kt)("inlineCode",{parentName:"p"},"EdgeAs()")," function, For example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-graphql"},"A AS var(func: eq(name, $0)) {\n    B AS film {\n        C AS performance {\n            D AS genre\n        }\n    }\n}\n")),(0,l.kt)("p",null,"You'll write"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'variable := dqlx.Variable(dql.EqFn("name", "test")).\n    As("A").\n    EdgeAs("B", "film").\n    EdgeAs("C", "film->performance", dqlx.Select(`\n         D AS genre\n    `))\n')),(0,l.kt)("h3",{id:"use-the-variable"},"Use the variable"),(0,l.kt)("p",null,"To use a variable within a query is super simple, just add the variable to a query using the ",(0,l.kt)("inlineCode",{parentName:"p"},"Variable()")," method\nthen refer to it with the ",(0,l.kt)("inlineCode",{parentName:"p"},"P")," function (",(0,l.kt)("inlineCode",{parentName:"p"},"P")," stands for ",(0,l.kt)("strong",{parentName:"p"},"Predicate"),")."),(0,l.kt)(i.Z,{defaultValue:"dqlx",values:[{label:"dqlx",value:"dqlx"},{label:"dql",value:"dql"}],mdxType:"Tabs"},(0,l.kt)(o.Z,{value:"dqlx",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'variable := dqlx.Variable(dql.EqFn("name", "test")).\n    Edge("film").\n    Edge("film->performance", dqlx.Select(`\n        D AS genre\n    `))\n\ndb.QueryType("Film").\n    Select("uid").\n    Filter(dqlx.Eq{\n        "genre": dqlx.P("D"),\n    }).\n    Variable(variable)\n'))),(0,l.kt)(o.Z,{value:"dql",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-graphql"},'{\n    var(func:eq(name, "test")) {\n        film {\n            performance {\n                D AS genre\n            }\n        }\n    }\n\n    totalRoles(func: type(Film)) @filter(eq(genre, D)) {\n        uid\n    }\n}\n')))),(0,l.kt)("h2",{id:"value-variables"},"Value Variables"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://dgraph.io/docs/query-language/value-variables/"},"Value Variables")),(0,l.kt)("p",null,"Value variables store scalar values. Value variables are a map from the UIDs of the enclosing block to the corresponding values.",(0,l.kt)("br",null),"\nValue variables are used by extracting the values with ",(0,l.kt)("inlineCode",{parentName:"p"},"val(var-name)"),", or by extracting the UIDs with ",(0,l.kt)("inlineCode",{parentName:"p"},"uid(var-name)"),"."),(0,l.kt)("p",null,"To use value variables you can simply use the ",(0,l.kt)("inlineCode",{parentName:"p"},"Val()")," function"),(0,l.kt)(i.Z,{defaultValue:"dqlx",values:[{label:"dqlx",value:"dqlx"},{label:"dql",value:"dql"}],mdxType:"Tabs"},(0,l.kt)(o.Z,{value:"dqlx",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'variable := dqlx.Variable(dql.AlloftermsFn("name@en", "The Princess Bride")).\n    Edge("starring").\n    EdgeAs("pbActors", "starring->performance.actor", dqlx.Select(\n        dqlx.As("roles", dqxl.Count("actor.film")),\n    ))\n\ndb.Query(dqlx.UIDFn(dqlx.P("pbActors"))).\n    OrderAsc(dqlx.Val("roles")).\n    Select(\n        "name@en",\n        dqlx.Alias("numRoles", dqlx.Val(roles)),\n    )\n'))),(0,l.kt)(o.Z,{value:"dql",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-graphql"},'{\n    var(func:allofterms(name@en, "The Princess Bride")) {\n        starring {\n            pbActors as performance.actor {\n                roles as count(actor.film)\n            }\n        }\n    }\n\n    totalRoles(func: uid(<pbActors>), orderasc: val(roles)) {\n        name@en\n        numRoles : val(roles)\n    }\n}\n')))))}p.isMDXComponent=!0},6010:function(e,n,r){"use strict";function t(e){var n,r,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e))for(n=0;n<e.length;n++)e[n]&&(r=t(e[n]))&&(a&&(a+=" "),a+=r);else for(n in e)e[n]&&(a&&(a+=" "),a+=n);return a}function a(){for(var e,n,r=0,a="";r<arguments.length;)(e=arguments[r++])&&(n=t(e))&&(a&&(a+=" "),a+=n);return a}r.d(n,{Z:function(){return a}})}}]);